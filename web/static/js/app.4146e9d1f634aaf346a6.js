webpackJsonp([1],{116:function(e,t){},117:function(e,t){},118:function(e,t){},122:function(e,t,n){function s(e){n(118)}var i=n(14)(n(71),n(127),s,null,null);e.exports=i.exports},123:function(e,t,n){var s=n(14)(n(72),n(128),null,null,null);e.exports=s.exports},124:function(e,t,n){function s(e){n(116)}var i=n(14)(n(73),n(125),s,null,null);e.exports=i.exports},125:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("version-create-form"),e._v(" "),n("table",{staticClass:"aui versions-table"},[e._m(0),e._v(" "),n("tbody",e._l(e.versions,function(t){return n("tr",{key:t.id},[n("td",[e._v(e._s(t.name))]),e._v(" "),n("td",[n("aui-lozenge",{attrs:{subtle:"",type:t.released?"success":"current"}},[e._v("\n          "+e._s(t.released?"Released":"Unreleased")+"\n        ")])],1),e._v(" "),n("td",[e._v(e._s(t.startDate))]),e._v(" "),n("td",[e._v(e._s(t.releaseDate))]),e._v(" "),n("td",[e._v(e._s(t.description))]),e._v(" "),n("td",[n("a",{staticClass:"aui-button aui-button-subtle",on:{click:function(n){e.deleteVersion(t)}}},[n("span",{staticClass:"aui-icon aui-icon-small aui-iconfont-delete"},[e._v("Delete")])])])])}))]),e._v(" "),n("version-delete-dialog",{ref:"deleteDialog"})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",{staticClass:"versions-table__name"},[e._v("Version")]),e._v(" "),n("th",{staticClass:"versions-table__status"},[e._v("Status")]),e._v(" "),n("th",{staticClass:"versions-table__date"},[e._v("Start date")]),e._v(" "),n("th",{staticClass:"versions-table__date"},[e._v("Release date")]),e._v(" "),n("th",{staticClass:"versions-table__description"},[e._v("Description")]),e._v(" "),n("th",{staticClass:"dynamic-table__actions"},[e._v("Actions")])])])}]}},126:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"aui-message-bar"}}),e._v(" "),n("div",{staticClass:"aui-page-panel"},[n("div",{staticClass:"aui-page-panel-inner"},[n("section",{staticClass:"aui-page-panel-content contains-header"},[e._m(0),e._v(" "),n("label",[e._v("\n          Select project:\n          "),n("aui-select2-single",{attrs:{placeholder:"Select project",value:e.selected?e.selected.key:void 0},on:{input:e.updateSelectedProject}},e._l(e.projects,function(t){return n("aui-select2-option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.name))])}))],1),e._v(" "),n("br"),n("br"),n("br"),e._v(" "),n("version-list")],1)])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"aui-page-header aui-page-header-fixed"},[n("div",{staticClass:"aui-page-header-inner"},[n("h1",[e._v("Releases")])])])}]}},127:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"aui top-label releases-add-version",on:{submit:function(t){t.preventDefault(),e.onSubmit(t)}}},[n("div",{attrs:{id:"add-version-fieldset"}},[n("div",{staticClass:"field-group"},[e._m(0),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.versionName,expression:"versionName"}],staticClass:"text",attrs:{disabled:e.versionCreatePending,id:"version-name",type:"text",placeholder:"Version name",required:"",autofocus:""},domProps:{value:e.versionName},on:{input:function(t){t.target.composing||(e.versionName=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"field-group"},[n("label",{attrs:{for:"start-date"}},[e._v("Start date")]),e._v(" "),n("div",{staticClass:"input-with-button"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.versionStartDate,expression:"versionStartDate"}],staticClass:"text",attrs:{disabled:e.versionCreatePending,id:"start-date",type:"text"},domProps:{value:e.versionStartDate},on:{input:function(t){t.target.composing||(e.versionStartDate=t.target.value)}}}),e._v(" "),n("a",{staticClass:"aui-button aui-button-primary",on:{click:e.setStartDateToday}},[e._v("Today")])])]),e._v(" "),n("div",{staticClass:"field-group"},[n("label",{attrs:{for:"release-date"}},[e._v("Release date")]),e._v(" "),n("div",{staticClass:"input-with-button"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.versionReleaseDate,expression:"versionReleaseDate"}],staticClass:"text",attrs:{disabled:e.versionCreatePending,id:"release-date",type:"text"},domProps:{value:e.versionReleaseDate},on:{input:function(t){t.target.composing||(e.versionReleaseDate=t.target.value)}}}),e._v(" "),n("a",{staticClass:"aui-button aui-button-primary",on:{click:e.setReleaseDateToday}},[e._v("Today")])])]),e._v(" "),n("div",{staticClass:"field-group"},[n("label",{attrs:{for:"version-description"}},[e._v("Description")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.versionDescription,expression:"versionDescription"}],staticClass:"text",attrs:{disabled:e.versionCreatePending,id:"version-description",type:"text"},domProps:{value:e.versionDescription},on:{input:function(t){t.target.composing||(e.versionDescription=t.target.value)}}})]),e._v(" "),e._m(1)])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{attrs:{for:"version-name"}},[e._v("Version name"),n("span",{staticClass:"aui-icon icon-required"},[e._v(" required")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"field-group",attrs:{id:"button-group"}},[n("button",{staticClass:"aui-button aui-button-primary"},[e._v("Add")])])}]}},128:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"aui-layer aui-dialog2 aui-dialog2-medium",attrs:{role:"dialog",id:"delete-confirm-dialog","aria-hidden":"true"}},[n("header",{staticClass:"aui-dialog2-header"},[n("h2",{staticClass:"aui-dialog2-header-main"},[e._v("Delete "+e._s(e.deleteConfirmVersion?e.deleteConfirmVersion.name:""))]),e._v(" "),e._m(0)]),e._v(" "),n("div",{staticClass:"aui-dialog2-content",staticStyle:{"min-height":"80px"}},[n("p",[e._v("Are you sure you want to delete "+e._s(e.deleteConfirmVersion?e.deleteConfirmVersion.name:"")+"?")])]),e._v(" "),n("footer",{staticClass:"aui-dialog2-footer"},[n("div",{staticClass:"aui-dialog2-footer-actions"},[n("button",{staticClass:"aui-button aui-button-primary",staticStyle:{"min-width":"50px"},on:{click:e.confirmDelete}},[e._v("\n        Yes\n      ")]),e._v(" "),n("button",{staticClass:"aui-button aui-button-link",on:{click:e.cancelDelete}},[e._v("Cancel")])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"aui-dialog2-header-close"},[n("span",{staticClass:"aui-icon aui-icon-small aui-iconfont-close-dialog"},[e._v("Close")])])}]}},44:function(e,t,n){"use strict";var s,i=n(77),a=n.n(i),r=n(76),o=n.n(r),c=n(25),l=n(24),u=n(66),d=n(65),v=n(68);c.a.use(l.b);var f={allProjects:[],selectedProject:null,allVersions:[]},p={allProjects:function(e){return e.allProjects},allVersions:function(e){return e.allVersions},selectedProject:function(e){return e.selectedProject}},_={getAllProjects:function(e){var t=e.commit,n=e.dispatch;return d.a.getProjects().then(function(e){return t(v.a,e),null===f.selectedProject&&e.length>0&&n("setSelectedProject",e[0].key),o.a.resolve(e)})},setSelectedProject:function(e,t){var n=e.commit,s=e.dispatch,i=f.allProjects.find(function(e){return e.key===t});n(v.b,i),s("getAllVersions",t)},getAllVersions:function(e,t){var n=e.commit;d.a.getVersions(t).then(function(e){n(v.c,e)})},createVersion:function(e,t){var n=e.commit;return t.project=f.selectedProject.key,""===t.startDate&&delete t.startDate,""===t.releaseDate&&delete t.releaseDate,d.a.createVersion(t).then(function(e){n(v.d,e)})},deleteVersion:function(e,t){var n=e.commit;return n(v.e,t),d.a.deleteVersion(t.id).then(function(e){return e},function(e){return n(v.d,t),o.a.reject(e)})}},m=(s={},a()(s,v.a,function(e,t){e.allProjects=t}),a()(s,v.b,function(e,t){e.selectedProject=t}),a()(s,v.c,function(e,t){e.allVersions=t}),a()(s,v.d,function(e,t){e.allVersions.push(t)}),a()(s,v.e,function(e,t){var n=e.allVersions.indexOf(t);n>-1&&e.allVersions.splice(n,1)}),s);t.a=new l.b.Store({state:f,getters:p,actions:_,mutations:m,plugins:[],strict:u.a.vuex_strict})},46:function(e,t,n){function s(e){n(117)}var i=n(14)(n(70),n(126),s,null,null);e.exports=i.exports},65:function(e,t,n){"use strict";function s(){return c.a.get("/api/project").then(function(e){return e.data})}function i(e){return c.a.get("/api/project/"+e+"/versions").then(function(e){return e.data})}function a(e){return c.a.post("/api/version",e).then(function(e){return e.data})}function r(e){return c.a.delete("/api/version/"+e).then(function(e){return e.data})}var o=n(47),c=n.n(o);c.a.defaults.headers.common.Authorization="Bearer "+window.apiKey,t.a={getProjects:s,getVersions:i,createVersion:a,deleteVersion:r}},66:function(e,t,n){"use strict";t.a={vuex_strict:!1}},67:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(25),i=n(45),a=n.n(i),r=n(46),o=n.n(r),c=n(44);s.a.config.productionTip=!1,s.a.use(a.a),new s.a({el:"#app",store:c.a,render:function(e){return e(o.a)}})},68:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"e",function(){return o});var s="RECEIVE_PROJECTS",i="RECEIVE_VERSIONS",a="RECIEVE_VERSION",r="SET_SELECTED_PROJECT",o="DELETE_VERSION"},69:function(e,t,n){"use strict";var s=n(75),i=n.n(s);t.a={formatErrorResponse:function(e){var t="";return e.errorMessages.forEach(function(e){t+="<p>"+e+"</p>"}),i()(e.errors).length>0&&(t+="<p><b>Fields with errors:</b><br/>",i()(e.errors).forEach(function(n){t+=n+": "+e.errors[n]+"<br/>"}),t+="</p>"),t}}},70:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(24),i=n(124),a=n.n(i);t.default={name:"app",components:{VersionList:a.a},computed:n.i(s.a)({projects:"allProjects",selected:"selectedProject"}),methods:{updateSelectedProject:function(e){this.$store.dispatch("setSelectedProject",e)}},created:function(){this.$store.dispatch("getAllProjects").catch(function(e){AJS.messages.error({title:"Error loading projects.",body:"<p>"+e.response.status+" "+e.response.statusText+"</p>"})})}}},71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(69),i=function(e){var t=e.getMonth();t<10&&(t="0"+t);var n=e.getDay();return n<10&&(n="0"+n),e.getFullYear()+"-"+t+"-"+n};t.default={name:"versionList",data:function(){return{versionName:"",versionStartDate:"",versionReleaseDate:"",versionDescription:"",versionCreatePending:!1}},methods:{onSubmit:function(){var e=this;this.versionCreatePending=!0,this.$store.dispatch("createVersion",{name:this.versionName,description:this.versionDescription,startDate:this.versionStartDate,releaseDate:this.versionReleaseDate}).then(function(){e.versionCreatePending=!1,e.versionName="",e.versionStartDate="",e.versionReleaseDate="",e.versionDescription="",setTimeout(function(){AJS.$("#version-name").focus()},100)},function(t){e.versionCreatePending=!1,AJS.messages.error({title:"Error creating version.",body:s.a.formatErrorResponse(t.response.data)})})},setStartDateToday:function(){this.versionStartDate=i(new Date)},setReleaseDateToday:function(){this.versionReleaseDate=i(new Date)},cancelDelete:function(){AJS.dialog2("#delete-confirm-dialog").hide()}},mounted:function(){var e=this;AJS.$("#start-date").datePicker({overrideBrowserDefault:!0,onSelect:function(t){e.versionStartDate=t}}),AJS.$("#release-date").datePicker({overrideBrowserDefault:!0,onSelect:function(t){e.versionReleaseDate=t}})}}},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"versionList",data:function(){return{deleteConfirmVersion:null}},methods:{deleteVersion:function(e){this.deleteConfirmVersion=e,AJS.dialog2("#delete-confirm-dialog").show()},confirmDelete:function(){AJS.dialog2("#delete-confirm-dialog").hide(),this.$store.dispatch("deleteVersion",this.deleteConfirmVersion).catch(function(e){AJS.messages.error({title:"Error deleting version.",body:"<p>"+e.response.status+" "+e.response.statusText+"</p>"})})},cancelDelete:function(){AJS.dialog2("#delete-confirm-dialog").hide()}}}},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(24),i=n(122),a=n.n(i),r=n(123),o=n.n(r);t.default={name:"versionList",components:{VersionCreateForm:a.a,VersionDeleteDialog:o.a},methods:{deleteVersion:function(e){this.$refs.deleteDialog.deleteVersion(e)}},computed:n.i(s.a)({versions:"allVersions"})}}},[67]);
//# sourceMappingURL=app.4146e9d1f634aaf346a6.js.map